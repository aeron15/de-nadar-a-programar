---
title: "graficos  interactivos"
author: "Renan Escalante-Chong"
date: "8/3/2017"
output: html_document
---

```{r}
library(readxl)
library(dplyr)
library(janitor)
library(ggplot2)
library(magrittr)
library(tidyr)
library(stringr)
library(readr)
library(lubridate)
library(gganimate)
library(gapminder)
library(animation)

```

```{r}
theme_set(theme_bw())
p <- ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, color = continent, frame = year)) +
  geom_point() +
  scale_x_log10()

gganimate(p, "output.gif")
```


```{r}
temperatura_df<- read_tsv("../datos/temperatura_por_sitio.tsv")
```

```{r}
temperatura_df_plot <- temperatura_df %>% group_by(year, localidad) %>% summarise(promedio_temperatura = mean(temperatura))

temperatura_df_plot %>% filter(year == '2002') %>% ggplot(aes(x= localidad, y = promedio_temperatura, fill = promedio_temperatura)) + geom_bar(stat = 'identity') + theme(axis.text.x = element_text(angle = 90, hjust = 1)) 
```

```{r}
temperatura_df_plot %>% filter(year == '2002') %>% ggplot(aes(x= localidad, y = promedio_temperatura, fill = promedio_temperatura)) + geom_bar(stat = 'identity') + theme(axis.text.x = element_text(angle = 45, hjust = 1)) + coord_polar(theta = "x", direction=1) + scale_fill_gradient(low="blue", high="red")
```

```{r}

library(ggplot2)
library(gapminder)

p <- ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, color = continent, frame = year)) +
  geom_point() +
  scale_x_log10()

p

gganimate(p)
```
```{r}
library(tweenr)

gapminder_edit <- gapminder %>%
  arrange(country, year) %>%
  select(gdpPercap,lifeExp,year,country, continent, pop) %>%
  rename(x=gdpPercap,y=lifeExp,time=year,id=country) %>%
  mutate(ease="linear")

gapminder_tween <- tween_elements(gapminder_edit,
                                  "time", "id", "ease", nframes = 300) %>%
  mutate(year = round(time), country = .group) %>%
  left_join(gapminder, by=c("country","year","continent")) %>%
  rename(population = pop.x)

p2 <- ggplot(gapminder_tween,
             aes(x=x, y=y, frame = .frame)) +
  geom_point(aes(size=population, color=continent),alpha=0.8) +
  xlab("GDP per capita") +
  ylab("Life expectancy at birth") +
  scale_x_log10()

gganimate(p2, filename="gapminder-tween.gif", title_frame = FALSE, interval = 0.05)
  ```

